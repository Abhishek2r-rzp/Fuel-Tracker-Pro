export const CATEGORY_HIERARCHY = {
  Income: {
    emoji: "💰",
    subcategories: [
      "Salary",
      "Freelance",
      "Business Income",
      "Interest",
      "Dividends",
      "Rental Income",
      "Cashback",
      "Refunds",
      "Rewards",
      "Others",
    ],
  },
  "Food & Dining": {
    emoji: "🍔",
    subcategories: [
      "Swiggy",
      "Zomato",
      "Uber Eats",
      "Restaurants",
      "Cafes",
      "Fast Food",
      "Others",
    ],
  },
  Groceries: {
    emoji: "🛒",
    subcategories: [
      "BigBasket",
      "Blinkit",
      "Zepto",
      "Dunzo",
      "DMart",
      "JioMart",
      "Supermarkets",
      "Local Stores",
      "Others",
    ],
  },
  "Shopping - Online": {
    emoji: "🛍️",
    subcategories: ["Amazon", "Flipkart", "Myntra", "Ajio", "Nykaa", "Others"],
  },
  "Shopping - Retail": {
    emoji: "🛍️",
    subcategories: [
      "Clothing",
      "Electronics",
      "Home & Garden",
      "Personal Care",
      "Others",
    ],
  },
  Transport: {
    emoji: "🚗",
    subcategories: [
      "Uber",
      "Ola",
      "Rapido",
      "Metro",
      "Bus",
      "Train",
      "Auto",
      "Fuel",
      "Parking",
      "Others",
    ],
  },
  Entertainment: {
    emoji: "🎬",
    subcategories: [
      "Netflix",
      "Prime Video",
      "Hotstar",
      "Spotify",
      "YouTube Premium",
      "BookMyShow",
      "PVR",
      "Movies",
      "Events",
      "Gaming",
      "Others",
    ],
  },
  Healthcare: {
    emoji: "🏥",
    subcategories: [
      "Hospitals",
      "Clinics",
      "Medicines",
      "Lab Tests",
      "Health Insurance",
      "Gym",
      "Fitness",
      "Others",
    ],
  },
  Utilities: {
    emoji: "💡",
    subcategories: [
      "Electricity",
      "Water",
      "Gas",
      "Internet",
      "Mobile",
      "DTH",
      "Broadband",
      "Others",
    ],
  },
  Education: {
    emoji: "📚",
    subcategories: [
      "School Fees",
      "College Fees",
      "Courses",
      "Books",
      "Tuition",
      "Training",
      "Others",
    ],
  },
  Travel: {
    emoji: "✈️",
    subcategories: [
      "MakeMyTrip",
      "Airbnb",
      "OYO",
      "Goibibo",
      "Yatra",
      "Flights",
      "Hotels",
      "Vacation",
      "Others",
    ],
  },
  Investments: {
    emoji: "📈",
    subcategories: [
      "Groww",
      "Zerodha",
      "Upstox",
      "Mutual Funds",
      "Stocks",
      "SIP",
      "Gold",
      "Real Estate",
      "Crypto",
      "Others",
    ],
  },
  Insurance: {
    emoji: "🛡️",
    subcategories: [
      "Life Insurance",
      "Health Insurance",
      "Vehicle Insurance",
      "Home Insurance",
      "Others",
    ],
  },
  "Rent & Housing": {
    emoji: "🏠",
    subcategories: [
      "House Rent",
      "Maintenance",
      "Property Tax",
      "Home Loan EMI",
      "Others",
    ],
  },
  "Bills & Fees": {
    emoji: "📄",
    subcategories: [
      "Bank Fees",
      "Service Charges",
      "Late Fees",
      "Legal Fees",
      "Government Fees",
      "Others",
    ],
  },
  "Credit Card Bills": {
    emoji: "💳",
    subcategories: [
      "HDFC",
      "ICICI",
      "SBI",
      "Axis",
      "Cred",
      "Amazon Pay",
      "Others",
    ],
  },
  Subscriptions: {
    emoji: "📱",
    subcategories: [
      "Streaming Services",
      "Cloud Storage",
      "Software",
      "Magazines",
      "News",
      "Others",
    ],
  },
  "Personal Care": {
    emoji: "💆",
    subcategories: ["Salon", "Spa", "Grooming", "Cosmetics", "Others"],
  },
  "Gifts & Donations": {
    emoji: "🎁",
    subcategories: ["Gifts", "Charity", "Religious", "Social Causes", "Others"],
  },
  Transfers: {
    emoji: "💸",
    subcategories: [
      "Family",
      "Friends",
      "Business",
      "Wallet Transfers",
      "Paytm",
      "PhonePe",
      "GPay",
      "Others",
    ],
  },
  Business: {
    emoji: "💼",
    subcategories: [
      "Office Supplies",
      "Equipment",
      "Marketing",
      "Professional Services",
      "Others",
    ],
  },
  Pets: {
    emoji: "🐾",
    subcategories: [
      "Pet Food",
      "Veterinary",
      "Pet Supplies",
      "Grooming",
      "Others",
    ],
  },
  Kids: {
    emoji: "👶",
    subcategories: ["Daycare", "Toys", "Clothing", "Activities", "Others"],
  },
  ATM: {
    emoji: "🏧",
    subcategories: ["Cash Withdrawal", "ATM Fees", "Others"],
  },
  Others: {
    emoji: "📌",
    subcategories: ["Miscellaneous", "Unknown", "Uncategorized"],
  },
};

export const CATEGORY_EMOJIS = {
  Income: "💰",
  Salary: "💰",
  Freelance: "💼",
  "Business Income": "💼",
  Interest: "💵",
  Dividends: "📈",
  "Rental Income": "🏠",
  Cashback: "💸",
  Refunds: "↩️",
  Rewards: "🎁",

  "Food & Dining": "🍔",
  Swiggy: "🍽️",
  Zomato: "🍕",
  "Uber Eats": "🍔",
  Restaurants: "🍴",
  Cafes: "☕",
  "Fast Food": "🍟",

  Groceries: "🛒",
  BigBasket: "🥬",
  Blinkit: "⚡",
  Zepto: "🛒",
  Dunzo: "📦",
  DMart: "🛒",
  JioMart: "🛒",
  Supermarkets: "🛒",
  "Local Stores": "🏪",

  "Shopping - Online": "🛍️",
  "Shopping - Retail": "🛍️",
  Shopping: "🛍️",
  Amazon: "📦",
  Flipkart: "🛒",
  Myntra: "👗",
  Ajio: "👕",
  Nykaa: "💄",
  Clothing: "👕",
  Electronics: "💻",
  "Home & Garden": "🏡",
  "Personal Care": "💆",

  Transport: "🚗",
  Uber: "🚕",
  Ola: "🚖",
  Rapido: "🏍️",
  Metro: "🚇",
  Bus: "🚌",
  Train: "🚆",
  Auto: "🛺",
  Fuel: "⛽",
  Parking: "🅿️",

  Entertainment: "🎬",
  Netflix: "📺",
  "Prime Video": "🎬",
  Hotstar: "📺",
  Spotify: "🎵",
  "YouTube Premium": "▶️",
  BookMyShow: "🎟️",
  PVR: "🎬",
  Movies: "🎥",
  Events: "🎪",
  Gaming: "🎮",

  Healthcare: "🏥",
  Hospitals: "🏥",
  Clinics: "⚕️",
  Medicines: "💊",
  "Lab Tests": "🧪",
  Gym: "💪",
  Fitness: "🏃",

  Utilities: "💡",
  Electricity: "⚡",
  Water: "💧",
  Gas: "🔥",
  Internet: "🌐",
  Mobile: "📱",
  DTH: "📡",
  Broadband: "🌐",

  Education: "📚",
  "School Fees": "🏫",
  "College Fees": "🎓",
  Courses: "📖",
  Books: "📚",
  Tuition: "👨‍🏫",
  Training: "📝",

  Travel: "✈️",
  MakeMyTrip: "✈️",
  Airbnb: "🏡",
  OYO: "🏨",
  Goibibo: "✈️",
  Yatra: "✈️",
  Flights: "✈️",
  Hotels: "🏨",
  Vacation: "🏖️",

  Investments: "📈",
  Investment: "📈",
  Groww: "📈",
  Zerodha: "📊",
  Upstox: "📈",
  "Mutual Funds": "💼",
  Stocks: "📈",
  SIP: "💰",
  Gold: "🪙",
  "Real Estate": "🏢",
  Crypto: "₿",

  Insurance: "🛡️",
  "Life Insurance": "🛡️",
  "Health Insurance": "🏥",
  "Vehicle Insurance": "🚗",
  "Home Insurance": "🏠",

  "Rent & Housing": "🏠",
  Rent: "🏠",
  "House Rent": "🏠",
  Maintenance: "🔧",
  "Property Tax": "🏛️",
  "Home Loan EMI": "🏦",

  "Bills & Fees": "📄",
  "Bill Payments": "📄",
  "Bank Fees": "🏦",
  "Service Charges": "💵",
  "Late Fees": "⏰",
  "Legal Fees": "⚖️",
  "Government Fees": "🏛️",

  "Credit Card Bills": "💳",
  "Credit Card Bill Payments": "💳",
  HDFC: "💳",
  ICICI: "💳",
  SBI: "💳",
  Axis: "💳",
  Cred: "💳",
  "Amazon Pay": "💳",

  Subscriptions: "📱",
  "Streaming Services": "📺",
  "Cloud Storage": "☁️",
  Software: "💻",
  Magazines: "📰",
  News: "📰",

  "Gifts & Donations": "🎁",
  Gifts: "🎁",
  Charity: "❤️",
  Religious: "🙏",
  "Social Causes": "🤝",

  Transfers: "💸",
  Family: "👨‍👩‍👧‍👦",
  Friends: "👥",
  Business: "💼",
  "Wallet Transfers": "💳",
  Paytm: "💳",
  PhonePe: "📱",
  GPay: "💰",

  Pets: "🐾",
  "Pet Food": "🍖",
  Veterinary: "🏥",
  "Pet Supplies": "🐕",
  Grooming: "✂️",

  Kids: "👶",
  Daycare: "🏫",
  Toys: "🧸",
  Activities: "🎨",

  ATM: "🏧",
  Cash: "💵",
  "Cash Withdrawal": "💵",
  "ATM Fees": "🏧",

  Others: "📌",
  Miscellaneous: "📌",
  Unknown: "❓",
  Uncategorized: "❓",
};

export function getCategoryEmoji(category) {
  if (!category) return CATEGORY_EMOJIS["Uncategorized"];

  const normalizedCategory = String(category).trim();

  if (CATEGORY_EMOJIS[normalizedCategory]) {
    return CATEGORY_EMOJIS[normalizedCategory];
  }

  const lowerCategory = normalizedCategory.toLowerCase();
  for (const [key, emoji] of Object.entries(CATEGORY_EMOJIS)) {
    if (
      key.toLowerCase().includes(lowerCategory) ||
      lowerCategory.includes(key.toLowerCase())
    ) {
      return emoji;
    }
  }

  return CATEGORY_EMOJIS["Others"];
}

export function getCategoryWithEmoji(category) {
  const emoji = getCategoryEmoji(category);
  const displayCategory = category || "Uncategorized";
  return `${emoji} ${displayCategory}`;
}

export function getMainCategory(category) {
  if (!category) return "Others";

  for (const [mainCat, data] of Object.entries(CATEGORY_HIERARCHY)) {
    if (mainCat === category) return mainCat;
    if (data.subcategories.includes(category)) return mainCat;
  }

  return "Others";
}

export function getSubcategories(mainCategory) {
  if (!mainCategory || !CATEGORY_HIERARCHY[mainCategory]) {
    return ["Others"];
  }
  return CATEGORY_HIERARCHY[mainCategory].subcategories;
}

export function getAllMainCategories() {
  return Object.keys(CATEGORY_HIERARCHY);
}

export function getFilteredCategories() {
  const excludedCategories = [
    "Bills & Fees",
    "Personal Care",
    "Gifts & Donations",
    "Utilities",
    "Education",
    "Business",
    "Pets",
    "Kids",
    "ATM",
  ];

  return Object.keys(CATEGORY_HIERARCHY).filter(
    (category) => !excludedCategories.includes(category)
  );
}

export function getCategoryHierarchyDisplay(category) {
  const mainCat = getMainCategory(category);
  const mainEmoji = CATEGORY_HIERARCHY[mainCat]?.emoji || "📌";

  if (mainCat === category) {
    return `${mainEmoji} ${mainCat}`;
  }

  const subEmoji = getCategoryEmoji(category);
  return `${mainEmoji} ${mainCat} → ${subEmoji} ${category}`;
}
